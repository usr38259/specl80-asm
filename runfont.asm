include macros80.inc

	CALL	0C010H
	LXI	D, 0C500H
	LXI	H, 9C00H
	MVI	B, 3
	CALL	MV
	LXI	D, 0C500H
	PUSH	D
NX:	LDA	9C00H
	MOV	C, A
	LXI	D, 9C01H
	LXI	H, 9C00H
	MVI	B, 3
	CALL	MV
	MOV	A, C
	STA	9EFFH
	LXI	D, 0A808H
	LXI	H, 0A800H
	MVI	B, 8
	CALL	MV
	POP	D
	MVI	H, 0A8H
	LDAX	D
	MVI	B, 8
L1:	MVI	L, 0F9H
	RLC
	JNC	L2
	MVI	C, 0FEH
	JMP	L3
L2:	MVI	C, 0
L3:	MOV	M, C
	INR	L
	JNZ	L3
	INR	H
	DCR	B
	JNZ	L1
	INX	D
	PUSH	D
	MOV	C, A
	MOV	A, D
	CPI	0C8H
	MOV	A, C
	JNZ	NX
	POP	D
	MVI	D, 0C5H
	PUSH	D
	JMP	NX
MV:	LDAX	D
	MOV	M, A
	INX	D
	INR	L
	JNZ	MV
	INR	H
	DCR	B
	JNZ	MV
	RET

	ENDALL
